uri: https://github.com/zigtools/zls
branch: 0.11.0
locald: repos/zls
lock: locks/zls.lock
env:
  _IVG_EXECUTABLE: "${IVG_WORKD}/${IVG_LOCALD}/zig-out/bin/zls"
  _IVG_BACKUP: "${_IVG_EXECUTABLE}.bk"
setup:
  - |
    if [ -e "$_IVG_EXECUTABLE" ]; then
      rm -f $_IVG_BACKUP
      mv $_IVG_EXECUTABLE $_IVG_BACKUP
    fi
install:
  - git submodule update --init
  - zig build
  - ln -snvf $_IVG_EXECUTABLE /usr/local/bin/zls
  - zls --version
skip:
  - |
    if [ -e "$_IVG_BACKUP" ]; then
      mv $_IVG_BACKUP $_IVG_EXECUTABLE
    fi
rollback:
  - |
    if [ -e "$_IVG_BACKUP" ]; then
      mv $_IVG_BACKUP $_IVG_EXECUTABLE
    fi
